# 12.43 Сортировка Шелла

## Задача
В текстовом файле input.txt находится массив из N целых чисел.
Выполните сортировку данных по возрастанию с помощью сортировки Шелла для следующих значений смещений:
1) значения смещений равны hs, где hs+1 = 2hs + 1, h0 = 1, причем
0 6 s < ⌊log2 N⌋ (последовательность 1, 3, 7, 15, 31, 63, . . .);
2) значения смещений равны hs, где hs+1 = 3hs + 1, h0 = 1, причем
0 6 s < ⌊log3
(2N + 1)⌋ − 1 (последовательность 1, 4, 13, 40, 121, . . .).
В текстовый файл output.txt выведите отсортированный массив
(в 1-ю строку файла) и число сравнений, проведенных двумя вариантами сортировки (во 2-ю строку файла).
## Решение
Сортировка Шелла (Shell sort) представляет собой усовершенствованный вариант сортировки вставками. Основная идея заключается в том, чтобы сначала сортировать элементы, находящиеся на некотором удалении друг от друга, а затем постепенно уменьшать это расстояние, пока не произойдет окончательная сортировка.

### Принцип работы:
1. **Выбор смещений (gaps):** Сначала выбираются смещения, которые определяют, какие элементы будут сравниваться и обмениваться. В алгоритме Шелла используется последовательность смещений, которая часто выражается в виде \(h_k = 2^k - 1\) или \(h_k = 3^k - 1\).
2. **Сортировка вставками с уменьшением смещения:** Происходит серия сортировок вставками, где каждый раз сравниваются и обмениваются элементы, находящиеся на выбранном смещении друг от друга.
3. **Уменьшение смещения:** После каждой серии сортировок смещение уменьшается, и процесс повторяется до тех пор, пока смещение не станет равным 1. Затем выполняется обычная сортировка вставками, которая завершает процесс.

### Сложность:
- **Лучший случай:** \(O(n \log n)\), где \(n\) - количество элементов в массиве.
- **Худший случай:** В худшем случае сортировка Шелла может иметь квадратичную сложность, но она все равно оказывается эффективнее сортировки вставками.
- **Средняя сложность:** В общем случае, сложность сортировки Шелла зависит от выбора последовательности смещений.

### Когда использовать:
- Сортировка Шелла обычно применяется в ситуациях, где требуется улучшить производительность сортировки вставками, но при этом использовать более сложные алгоритмы нецелесообразно.
- Это может быть полезно для небольших массивов или в случаях, когда важно минимизировать количество сравнений.

В общем, сортировка Шелла является алгоритмом, который обеспечивает разумный баланс между простотой реализации и эффективностью в определенных сценариях.